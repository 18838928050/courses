# Git 配置

各位小伙伴大家好，咱们接着前面的课程继续讲解 Github 开源之旅第三季：Git 进阶。这次课程咱们聊一聊 Git 配置。【切换到课程大纲】咱们先一块看一下课程大纲，在 Git 配置这个话题下面，咱们讨论四个问题，分别是：git ignore、换行问题、别名和凭证。其中 git ignore 和 换行问题，这两个问题咱们放到这个课程视频中讲解。凭证和别名咱们放到下一个视频中讲解。

## .gitignore

好，咱们先看第一个问题：git ignore。大家只要用过 HBuilder 或者其他 IDE 环境，一定有这样的经验，或者这样的困扰。IDE 集成开发环境，总是会在项目文件夹下自动生成一些文件，这些文件，往往和源代码没什么关系。**【切换到 Git Bash 下面】**以 HBuilder 为例，HBuilder 会在每个项目下面添加一个 .project 的隐藏文件，大家可以看一眼这个文件的内容。是一个 xml 文档，如果大家有洁癖呢？不希望每次 git status 查询仓库状态的时候，这个 .project 文件总显示在这里。有两个办法：笨办法是把 .project 文件删除，但是，这确实是个笨办法，因为 HBuilder 不知道什么时候，又会给你添加上。那第二种办法就是用 .gitignore 文件，来告诉 Git 工具，每次 git status 的时候，忽略这些文件的状态。这样，我们就不至于把这些没用的文件误提交到仓库中了。

都有哪些需要忽略文件的场合呢，这里给大家列举了一些：

- 忽略操作系统自动生成的文件，比如缩略图等；  
- 忽略编译生成的中间文件、可执行文件等，也就是如果一个文件是通过另一个文件自动生成的，那自动生成的文件就没必要放进版本库，比如： C 语言编译产生的 .obj 文件和 .exe 文件；  
- 忽略你自己的带有敏感信息的配置文件，比如：存放口令的配置文件；  
- tmp/ 临时目录  
- log/ 日志目录  
等等

添加一个 .gitignore 文件，并不复杂，这个文件是一个纯文本文件，文件的每一行代表一个被忽略的文件或者代表一类被忽略的文件。我们给之前的 MarkDown 仓库添加一个 .gitignore 文件试一下。**【操作演示一下，演示如何添加 .gitignore，如何编辑这个文件，增加这个文件之后，git status 命令的变化】**当然，为了增强这个文件的可读性，我们在文件中也可以添加注释，注释是以 # 号开头的行，这样的一行，会被视为注释文字而被忽略。当然，我们还可以忽略一批文件，办法是我们在文件名中使用 Globbing 通配符。关于 Globbing 通配符的话题，大家如果感兴趣，可以看一下我的 Selenium IDE web 自动化测试（下）篇课程中，有这样一个主题。

其实，我们并不需要从头来写 .gitignore 文件，GitHub 已经为我们准备了各种模板文件。当我们在 Github 上新建仓库时，我们可以直接根据我们所使用的编程语言，选择一个现成的 .gitignore 模板来用。**【操作演示一下】**我们给大家演示一下，可能有的小伙伴会怀疑，这个靠谱吗？我都不知道这个 .gitignore 文件中的内容是什么，不敢随便加到项目里去。

.gitignore 模板文件也托管在一个仓库里，这是一个文档型仓库，地址如下：
https://github.com/github/gitignore
我们打开这个仓库浏览一下，C 语言的 .gitignore 文件的的内容，你会看到，非常贴心吧，考虑的很全面，如果需要的话，我们可以在这个基础上进行内容的追加就好了。

这些模板都是基于开发语言来编写的，因为我们的仓库是文档型项目仓库，所以没有合适的模板来用，我们就自己添加就好了。当然，如果你是做 C 语言开发或者 Java 开发，你直接可以选择相应的 .gitignore 就好了，也可以在官方提供的文件上增加一些内容。

最后一步就是把 .gitignore 也提交到Git，就完成了！当然检验 .gitignore 的标准是 git status 命令是不是说 working directory clean。

有些时候，你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：

```bash
git add .project
The following paths are ignored by one of your .gitignore files:
App.class
Use -f if you really want to add them.
```

如果你确实想添加该文件，可以用 -f 强制添加到暂存区：

```bash
git add -f .project
```

或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用git check-ignore命令检查：

```bash
git check-ignore -v .project
```
Git 会告诉我们，.gitignore 的第 2 行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。

注意 .gitignore 文件本身需要放到版本库里，并且可以对 .gitignore 做版本管理！

## 换行

- 问题
  大家是不是每次修改完文件之后，在

- Git 文件换行问题  
  http://www.cnblogs.com/flying_bat/archive/2013/09/16/3324769.html  

## 别名

- 问题：效率低下
- 前提：基本命令已经玩熟了
- 解决办法：别名
- 如何实现

小伙伴们从 Github 开源之旅第一季：启程课程到现在，是不是 Git 的基本命令已经玩的很熟了？如果自己已经建了两三个仓库，开始每天在仓库里提交一些东西了，Git 命令的输入效率可能就是个问题了。这里面给小伙伴们介绍一个小技巧，可以使你的 Git 体验更简单、容易。这就是：别名。在 Git 进阶课程的前几个视频里，我已经开始使用别名了，通过别名，让我们的 Git 命令变得简短，提高我们的工作效率。这里面给小伙伴们讲一下，如果设置别名。

我们在 Git Bash 输入下面的命令。

```bash
git config --global alias.ci commit
```
这意味着，当要输入 git commit 时，只需要输入 git ci。 随着你继续不断地使用 Git，可能也会经常使用其他命令，所以创建别名时不要犹豫。把所有 Git 的子命令，都缩减成两个字母，提高我们操作 Git 命令的效率，而且尤其是子命令带很多参数，命令很长的时候，这个时候别名的威力就非常强大了。

```bash
git log --pretty=format:'%h %ad | %s%d [%an]' --graph --date=short
```
现在 git hi 就搞定了。

然后到用户主目录编辑 .gitconfig，编辑其余的别名。

## 凭证

- 问题：每次 push 都需要输入凭证，效率低下
- 解决办法：两个，一，存储凭证；二，换协议
- 如何存储凭证

在这个课程准备制作期间，收到个别小伙伴的反馈。有的小伙伴反馈，每次在 Git Bash 中向远程仓库推送 push 的时候，都需要输入 Github 的用户名密码，太麻烦了。有没有什么办法，可以把用户名和密码记住，省的每次都输入呢？这里有两个解决办法。

如果小伙伴们使用的是 HTTPS 协议来克隆的远程仓库，或者和远程仓库建立的连接。

```bash
git config --global credential.helper wincred
```
