# 模式

像 Vim 一样，Vimperator 的强大源自它的模式界面。浏览器所处模式不同，按键的功能就有区别。Vimperator 有多重模式，其中最重要的是普通模式和命令模式。因为，这两个模式用的最多，我们前面的课程中，这两个模式都已经涉及到了，快捷键中，冒号开头的，就进入了命令模式。准确的知道 Vimperator 当前处于什么模式，是很重要的。尤其是在插入模式，我们的快捷键往往会修改文档。如果你当前在插入模式中，而你没有意识到，你还在使用普通模式下的快捷键，这些快捷按键会修改你的文档内容，这就比较可怕了。所以，再强调一下，准确的知道 Vimperator 当前处于什么模式是很重要的。那么怎么知道 vimperator 的模式状态呢？要注意浏览器窗口的左下角，不同模式有不同的提示信息。

初学者一般在 Vimperator 的学习上容易受到挫折，可能觉得 Vimperator 没有想象的那么好用。其中一个主要原因是没有搞清楚，当前浏览器的模式。比如，我们用鼠标打开一个新标签页，这个时候光标自然处在地址栏当中，这个时候我们按 Vimperator 的快捷键就不顶用。但是你用 gH 就没事儿。

Vimperator 有七种不同的模式，PPT 上只列出了五种。当然七这个数字是否准确，我们就不细究了，因为，学会使用才是硬道理：

- 普通模式：正常浏览网页时
- 命令行模式：在 Vimperator 命令行中输入时
- hint 模式：快速打开页面上的链接
- 插入模式：在网站上的文本字段输入时
- 光标模式：在网页随意移动光标，一般和可视模式配合使用；
- 可视模式：用光标键选择文本时

## 普通模式

当 Vimperator 启动后，默认处于普通模式。这也将是我们大部分时间要接触的模式。课程开篇讲解的浏览网页就是普通模式。默认浏览器处于普通模式，在普通模式下，浏览器左下角没有任何提示信息。所有模式按 ESC 键都会回退到普通模式。普通模式是核心、是中转站，模式和模式的切换都是从普通模式切换过去的，比如：现在处于命令模式，想切换到插入模式，需要先回到普通模式，再由普通模式进入插入模式。

## 命令模式
Vimperator 的另一个核心模式是命令模式，可以在普通模式下按冒号进入。我们经常使用的冒号开头的命令（快捷键），就是命令模式，冒号后面跟的就是命令。

命令模式用于执行命令（:）和文本搜索（/和?）。
【有待补充，前面讲了哪些命令？如何看到命令的历史列表？】

### 【:】
启动命令行模式。在命令行模式中可以执行扩展命令，不过可能需要参数。

### 【Up】
从历史列表中调入匹配当前命令行内容的前一个命令。

### 【Down】
从历史列表中调入匹配当前命令行内容的后一个命令。

### 【Tab】
根据'wildmode'选项设定的行为补全光标前的单词。如果'wildmode'包含“list”且有多个符合条件的项，则打开补全菜单窗口。

## Hint 模式

Hint 是 Vimperator 提供的用于快速打开页面链接的方法。通过给每个链接增加适当的提示，您就可以花费极少的精力访问所有链接。与鼠标提供的传统方法相比，两者差异很大：在传统方法里，您需要先查找并确定目标链接，然后不停地重复按 Tab 键，除非您总是访问页面的第一个链接，否则过程会变得越来越乏味。

【hint 英文单词的含义是线索，相当于网页上的链接。】

### 【f{hint}】
启动 QuickHint 模式。在 QuickHint 模式中，每个可 hint 的项（可通过'hinttags' XPath查询）都会分配到一个唯一的数字。您可以输入这个数字，也可以根据'hintmatching'选项的设置输入链接的部分文本，每当确定唯一的链接后会将其自动打开。一般可以先键入一些字母来缩小范围，然后再键入一个数字来保证唯一。按<Leader>（默认为:let mapleader = "\"）可切换转义模式（escape-mode），在此模式中数字被作为普通文本处理。<Esc>可在任何时候停止此模式。

### 【F{hint}】
启动 QuickHint 模式，但在新标签页中打开链接。类似于普通的 QuickHint 模式（用 f 激活），不过会在新标签页中打开链接。

### 【;{mode}{empty}{hint}】
启动扩展 hint 模式。ExtendedHint 模式可用于对提示元素执行除默认的鼠标左键单击外的其他操作。例如，您可以复制链接地址、在新窗口中打开链接或保存图像。如果您想复制 hint24 的链接位置，那么按;y启动此模式。接着按24复制位置。

{mode}可以是下列的其中一种：  
- ; 设置焦点到元素
- s 链接另存为
- y 复制目标地址
- c 打开上下文菜单

## 插入模式
一般在网页的表单中，Vimperator 会自动切换到插入模式。在浏览器的最下方有绿色的 INSERT 字样。一般我们不能主动进入插入模式，除非把光标的焦点设置到文本框中。设置焦点的快捷键，我们在缓冲区的小节中已经介绍了，大家还有印象吗？答案是：gi。

## 光标模式
### 【c】
全网页移动光标。

## 可视模式
### 【v】
在光标模式下进入可视模式，可以选中文本。
