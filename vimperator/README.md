# vimperator 高效上网

## 缘起

---
在 Selenium IDE web 自动化测试入门课程中，视频演示中有一些操作浏览器的快捷方式，同学们很好奇，想知道我是怎么做到的。当时在上篇课程中，讲安装 Selenium IDE 的时候，讲了安装火狐浏览器，以及火狐浏览器的三个插件，firebug插件、Selenium IDE插件以及 Vimperator 插件，当时我提了 Vimperator 是效率工具，能够帮我们提高上网的效率。但是课程中一直没有专门去讲解，这里拿出一门专门的课程来介绍一下这个插件的用法。vimperator 的口号是：像黑客一样上网，即纯键盘操作浏览网页，其实就是帮助我们提高上网的效率。

## 简介

---
### 是什么？

Vimperator 是 Firefox 浏览器的扩展，它的大部分灵感来自 Vim 文本编辑器并致力于创造出更快、更高效的冲浪环境。Vimperator 的按键设置和 Vim 接近，您可以把它叫做模式化网页浏览器，因为在不同模式中按键设置会执行不同的操作。例如，它有个很特别的 Hint 模式，在此模式下只需要键盘就可以轻松点击链接。几乎所有的功能都可以通过命令完成，键入:back会在当前页面历史中后退，就如同点击过工具栏上的后退按钮。

不过，Vimperator 不打算百分百复制 Vim，更确切地说，它是把 Vim 的思想带入 21 世纪。这意味着充分利用新的图形处理能力以及更快速的计算机。另外，我们也认真考虑，使它的命令行界面更一致、易用的同时，仍然为高级用户的强大扩展。

### 特点

- 类Vim的按键绑定（h、j、k、l、gg、G、0、$、ZZ、<C-f>等）
- 带相应命令行的 Ex 命令（:quit、:open www.foo.com等）
- 所有命令均支持按 Tab 补全，在键入时会显示建议项
- Hint 模式（按 f 打开以点击链接）
- 扩展！没错，您可以使用脚本扩展  Vimperator 的功能，就像用扩展增强 Firefox 一样。
- 使用 :echo window 查看 JavaScript 对象、甚至支持上下文相关的Tab补全
- 可轻松自定义 GUI（用 :set gui=none 可快捷隐藏所有 GUI 元素）
- 可通过:sourceJavaScript文件来运行命令，如果安装了vimperator.vim则可高亮显示~/.vimperatorrc文件语法
- 通过 Firefox 关键字书签和搜索引擎可简便快速搜索（如:open foo将会在谷歌中搜索“foo”，而:open ebay terminator则会在ebay中搜索“terminator”）
- 许多命令支持与数字联用（如3<C-o>会后退3页）
- 出错时蜂鸣
- 支持标记（用ma给网页添加标记，后面用'a可转到此标记位置）
- 支持快速标记（用go{a-zA-Z0-9}可快速转到之前做过标记的页面）
- 支持 :map 和 :command（脚本编写者可用feedkeys()）
- :time 用于分析代码执行概况
- 使用 Vim 按键和可视模式来移动文本光标和选择文本
- 支持外部编辑器
- 重复按键操作的宏
- 自动化命令，用于在特定事件发生时执行操作
- 完善的帮助系统，说明了所有的命令、映射和选项

### 帮助

獲取幫助

Vim是個偉大的編輯器，但它的許多功能都與網頁瀏覽器無關。所以，即使是Vim熟手也可能需要不時查閱Vimperator文件。Vimperator特性的大部分文件都可以用:help命令輕鬆獲取。例如，您可以輸入以下命令找到:help命令的幫助

:help :help

類似地，配置選項的幫助內容可以通過:help 'option_name'命令取得。（注意選項名兩邊的單引號，這與Vim是一致的。）通過:help options可獲取所有選項的資訊。

另外您可以通過下列命令獲取gt和gT對映的說明


:help gt
:help gT


最後，除了幫助系統外，:exusage、:viusage和:optionusage也是非常有用的命令快速參考。

### 快速上手

滾動

滾動瀏覽器視窗可以通過簡單幾個按鍵完成：


    j/k——分別往下/往上滾動視窗一行
    h/l——左右滾動視窗
    <Space>/<C-b>——向下/向上滾動一屏的視窗
    <C-d>/<C-u>——向下/向上滾動半屏的視窗


標準按鍵（<Up>/<Down>/<PgUp>/<PgDn>）也會執行預期的操作。

history-navigationtab-navigation歷史和標籤頁

在歷史記錄中導航（如後退、前進）和滾動類似。


    <C-o>/<C-i>——在當前視窗/標籤頁的歷史記錄中後退/前進


對切換過標籤頁的Vimmer來說，在標籤頁間移動的按鍵應該很熟悉。


    gt/<C-n>——轉到後一個標籤頁
    gT/<C-p>——轉到前一個標籤頁
    g0/g$——轉到首個/最後一個標籤頁
    d——關閉當前標籤頁（刪除緩衝區）


要在新標籤頁中開啟網頁，請使用:tabopen url。:open則在當前標籤頁中開啟網址。在普通模式中，t和o分別對映到這兩個命令，所以下列按鍵序列的結果是相同的：


:open my.webmail.com
omy.webmail.com

:tabopen vimperator.org
tvimperator.org


hints-tutorial網頁瀏覽的一些提示

好了，您現在可以在Vimperator中轉轉了。可是等等，怎樣開啟網頁中的連結？沒有了您那帶尾巴的朋友，怎樣點選這些連結？

答案是hint。啟用hint將給Vimperator能找到的所有連結顯示含數字的就近提示。要開啟某個連結，只需簡單的輸入相應提示中的數字——默認是紅色方框中的白色數字。

對於文字連結，還有其他的快捷訪問方式；您可以輸入連結中所含的部分文字，Vimperator會搜尋它可以找到的所有連結，然後只對匹配連結進行提示，這可以進一步地縮小查找範圍。如果匹配輸入文字的連結只有一個，則Vimperator會自動開啟此連結而無需輸入更多內容。

不管您選擇了哪個提示連結的方法，只要Vimperator高亮了要開啟的連結，只需按下<Enter>即可開啟。

最常用的hint模式叫quick-hints。要啟用QuickHint模式，請按下f或F。小寫的f會在當前標籤頁中開啟結果連結，而大寫的F則會在新標籤頁中開啟。

測試下這個連結：Vimperator主頁。用f或F啟用QuickHint模式會高亮顯示所有可見連結。然後輸入連結的文字。應該能很快鎖定唯一的連結，然後Vimperator將其開啟。當您完成上述操作後，記得使用<C-o>（在歷史記錄中後退）或d（刪除緩衝區）返回此處，至於用哪個鍵則取決於您啟用QuickHint模式所使用的鍵。

## 安装

### vimperator

### vimperator 中文帮助

## 模式

像Vim一樣，Vimperator的強大源自它的模式介面。瀏覽器所處模式不同，按鍵的功能就有區別。Vimperator有多種模式，其中最重要的兩個是普通模式和命令列模式。

當Vimperator啟動後，默認處於普通模式。這也將是您大部分時間要接觸的模式。

Vimperator的另一個核心模式——命令列模式，可以在普通模式下按下:（冒號）進入。您會經常看到以:開頭的Vimperator命令，這表示後面跟著的是命令。

要從命令列模式返回到正常模式，請按下<Esc>。按下<Esc>也能從Vimperator的大部分其他模式中返回普通模式。


按键可以在四种不同的模式中进行映射：


    普通模式：正常浏览网页时
    可视模式：用光标键选择文本时
    插入模式：在网站上的文本字段输入时
    命令行模式：在Vimperator命令行中输入时

### 命令模式

### 普通模式

### 插入模式

### 可视模式

## 网页浏览

### 临时禁用Vimperator

### 打开网页

### 导航

### 重新载入

### 停止

### 写入

### 退出

### 当前目录

## 缓冲区

### 缓冲区信息

### 滚动命令

### 跳到元素

### 缩放

### 使用框架

### 复制文本

### 备选样式表

## 搜索文本

## 标签页

### 列出标签页

### 打开标签页

### 切换标签页

### 重排序标签页

### 关闭标签页

### 遍历标签页

## 链接

## 重复


